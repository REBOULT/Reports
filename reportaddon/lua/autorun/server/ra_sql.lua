/*----------------------------------------------------------------------
Leak by Famouse

Play good games:↓
http://store.steampowered.com/curator/32364216

Subscribe to the channel:↓
https://www.youtube.com/c/Famouse

More leaks in the discord:↓ 
https://discord.gg/rFdQwzm
------------------------------------------------------------------------*/

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                 
--                                                                                                                                                                                                                                                                                                                                
--   SSSSSSSSSSSSSSS      QQQQQQQQQ     LLLLLLLLLLL                  RRRRRRRRRRRRRRRRR   EEEEEEEEEEEEEEEEEEEEEE     QQQQQQQQQ     UUUUUUUU     UUUUUUUUIIIIIIIIIIRRRRRRRRRRRRRRRRR   EEEEEEEEEEEEEEEEEEEEEEMMMMMMMM               MMMMMMMMEEEEEEEEEEEEEEEEEEEEEENNNNNNNN        NNNNNNNNTTTTTTTTTTTTTTTTTTTTTTT   SSSSSSSSSSSSSSS 
-- SS:::::::::::::::S   QQ:::::::::QQ   L:::::::::L                  R::::::::::::::::R  E::::::::::::::::::::E   QQ:::::::::QQ   U::::::U     U::::::UI::::::::IR::::::::::::::::R  E::::::::::::::::::::EM:::::::M             M:::::::ME::::::::::::::::::::EN:::::::N       N::::::NT:::::::::::::::::::::T SS:::::::::::::::S
--S:::::SSSSSS::::::S QQ:::::::::::::QQ L:::::::::L                  R::::::RRRRRR:::::R E::::::::::::::::::::E QQ:::::::::::::QQ U::::::U     U::::::UI::::::::IR::::::RRRRRR:::::R E::::::::::::::::::::EM::::::::M           M::::::::ME::::::::::::::::::::EN::::::::N      N::::::NT:::::::::::::::::::::TS:::::SSSSSS::::::S
--S:::::S     SSSSSSSQ:::::::QQQ:::::::QLL:::::::LL                  RR:::::R     R:::::REE::::::EEEEEEEEE::::EQ:::::::QQQ:::::::QUU:::::U     U:::::UUII::::::IIRR:::::R     R:::::REE::::::EEEEEEEEE::::EM:::::::::M         M:::::::::MEE::::::EEEEEEEEE::::EN:::::::::N     N::::::NT:::::TT:::::::TT:::::TS:::::S     SSSSSSS
--S:::::S            Q::::::O   Q::::::Q  L:::::L                      R::::R     R:::::R  E:::::E       EEEEEEQ::::::O   Q::::::Q U:::::U     U:::::U   I::::I    R::::R     R:::::R  E:::::E       EEEEEEM::::::::::M       M::::::::::M  E:::::E       EEEEEEN::::::::::N    N::::::NTTTTTT  T:::::T  TTTTTTS:::::S            
--S:::::S            Q:::::O     Q:::::Q  L:::::L                      R::::R     R:::::R  E:::::E             Q:::::O     Q:::::Q U:::::D     D:::::U   I::::I    R::::R     R:::::R  E:::::E             M:::::::::::M     M:::::::::::M  E:::::E             N:::::::::::N   N::::::N        T:::::T        S:::::S            
-- S::::SSSS         Q:::::O     Q:::::Q  L:::::L                      R::::RRRRRR:::::R   E::::::EEEEEEEEEE   Q:::::O     Q:::::Q U:::::D     D:::::U   I::::I    R::::RRRRRR:::::R   E::::::EEEEEEEEEE   M:::::::M::::M   M::::M:::::::M  E::::::EEEEEEEEEE   N:::::::N::::N  N::::::N        T:::::T         S::::SSSS         
--  SS::::::SSSSS    Q:::::O     Q:::::Q  L:::::L                      R:::::::::::::RR    E:::::::::::::::E   Q:::::O     Q:::::Q U:::::D     D:::::U   I::::I    R:::::::::::::RR    E:::::::::::::::E   M::::::M M::::M M::::M M::::::M  E:::::::::::::::E   N::::::N N::::N N::::::N        T:::::T          SS::::::SSSSS    
--    SSS::::::::SS  Q:::::O     Q:::::Q  L:::::L                      R::::RRRRRR:::::R   E:::::::::::::::E   Q:::::O     Q:::::Q U:::::D     D:::::U   I::::I    R::::RRRRRR:::::R   E:::::::::::::::E   M::::::M  M::::M::::M  M::::::M  E:::::::::::::::E   N::::::N  N::::N:::::::N        T:::::T            SSS::::::::SS  
--       SSSSSS::::S Q:::::O     Q:::::Q  L:::::L                      R::::R     R:::::R  E::::::EEEEEEEEEE   Q:::::O     Q:::::Q U:::::D     D:::::U   I::::I    R::::R     R:::::R  E::::::EEEEEEEEEE   M::::::M   M:::::::M   M::::::M  E::::::EEEEEEEEEE   N::::::N   N:::::::::::N        T:::::T               SSSSSS::::S 
--            S:::::SQ:::::O  QQQQ:::::Q  L:::::L                      R::::R     R:::::R  E:::::E             Q:::::O  QQQQ:::::Q U:::::D     D:::::U   I::::I    R::::R     R:::::R  E:::::E             M::::::M    M:::::M    M::::::M  E:::::E             N::::::N    N::::::::::N        T:::::T                    S:::::S
--            S:::::SQ::::::O Q::::::::Q  L:::::L         LLLLLL       R::::R     R:::::R  E:::::E       EEEEEEQ::::::O Q::::::::Q U::::::U   U::::::U   I::::I    R::::R     R:::::R  E:::::E       EEEEEEM::::::M     MMMMM     M::::::M  E:::::E       EEEEEEN::::::N     N:::::::::N        T:::::T                    S:::::S
--SSSSSSS     S:::::SQ:::::::QQ::::::::QLL:::::::LLLLLLLLL:::::L     RR:::::R     R:::::REE::::::EEEEEEEE:::::EQ:::::::QQ::::::::Q U:::::::UUU:::::::U II::::::IIRR:::::R     R:::::REE::::::EEEEEEEE:::::EM::::::M               M::::::MEE::::::EEEEEEEE:::::EN::::::N      N::::::::N      TT:::::::TT      SSSSSSS     S:::::S--
--S::::::SSSSSS:::::S QQ::::::::::::::Q L::::::::::::::::::::::L     R::::::R     R:::::RE::::::::::::::::::::E QQ::::::::::::::Q   UU:::::::::::::UU  I::::::::IR::::::R     R:::::RE::::::::::::::::::::EM::::::M               M::::::ME::::::::::::::::::::EN::::::N       N:::::::N      T:::::::::T      S::::::SSSSSS:::::S
--S:::::::::::::::SS    QQ:::::::::::Q  L::::::::::::::::::::::L     R::::::R     R:::::RE::::::::::::::::::::E   QQ:::::::::::Q      UU:::::::::UU    I::::::::IR::::::R     R:::::RE::::::::::::::::::::EM::::::M               M::::::ME::::::::::::::::::::EN::::::N        N::::::N      T:::::::::T      S:::::::::::::::SS 
-- SSSSSSSSSSSSSSS        QQQQQQQQ::::QQLLLLLLLLLLLLLLLLLLLLLLLL     RRRRRRRR     RRRRRRREEEEEEEEEEEEEEEEEEEEEE     QQQQQQQQ::::QQ      UUUUUUUUU      IIIIIIIIIIRRRRRRRR     RRRRRRREEEEEEEEEEEEEEEEEEEEEEMMMMMMMM               MMMMMMMMEEEEEEEEEEEEEEEEEEEEEENNNNNNNN         NNNNNNN      TTTTTTTTTTT       SSSSSSSSSSSSSSS   
--                                Q:::::Q                                                                                   Q:::::Q                                                                                                                                                                                               
--                                 QQQQQQ                                                                                    QQQQQQ                                                                                                                                                                                               
--                                                                                                                                                                                                                                                                                                                                
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 
-- The Report Addon now supports MYSQLOO v9
-- You can find it here: https://facepunch.com/showthread.php?t=1515853

--To use this, you MUST have both the modules installed, if you're unsure, I (Bings), will be happy to help get you on four feet :)
---------------------------------------------------------------

reportAddonSQLConfig = {}

reportAddonSQLConfig.enableSQL = false
reportAddonSQLConfig.serverNumber = 1 -- VERY IMPORTANT IF YOU HAVE MULTIPLE SERVERS, GIVE EACH SERVER A UNIQUE NUMBER / 

if reportAddonSQLConfig.enableSQL == true then
    require( "mysqloo" )

    local sqlInformation = {
        host = "", -- Your SQL server's IP
        username = "", -- Your SQL server's username
        password = "", -- Your SQL server's user password
        databasename = "", -- Your database name
        port = 3306 -- The port you are using
    }

    radb = mysqloo.connect( sqlInformation["host"], sqlInformation["username"], sqlInformation["password"], sqlInformation["databasename"], sqlInformation["port"] )

    function radb:onConnected()
        print( "[REPORT ADDON] SQL connected" ) -- Prints message if connection worked

        local logsQuery = self:query( "CREATE TABLE IF NOT EXISTS reportaddon_logs (logtype VARCHAR(255), time VARCHAR(255), playername VARCHAR(255), datatwo VARCHAR(255), datathree VARCHAR(255)) ENGINE=MyISAM DEFAULT CHARSET=utf8" )
        logsQuery:start() -- Makes table if doesn't exist

        local historyQuery = self:query( "CREATE TABLE IF NOT EXISTS reportaddon_history (historyID INTEGER(32) NOT NULL AUTO_INCREMENT PRIMARY KEY, playerReporter VARCHAR(255), playerReported VARCHAR(255), reportWinner VARCHAR(255), reason VARCHAR(255), time DATE, handler VARCHAR(255)) ENGINE=MyISAM DEFAULT CHARSET=utf8" )
        historyQuery:start() -- Makes table if doesn't exist

        local saffQuery = self:query( "CREATE TABLE IF NOT EXISTS reportaddon_staff (player VARCHAR(18), totaltime INTEGER(32), lastvisit DATE, reportsCompleted INTEGER(32), rating INTEGER(32), reviews INTEGER(32), previousScore INTEGER(32), playerName VARCHAR(255)) ENGINE=MyISAM DEFAULT CHARSET=utf8" )
        saffQuery:start() -- Makes table if doesn't exist

        local reportQuery = self:query( "CREATE TABLE IF NOT EXISTS reportaddon_reports (rowid INTEGER(32) NOT NULL AUTO_INCREMENT PRIMARY KEY, reporter VARCHAR(255), reported VARCHAR(255), reason VARCHAR(255), notes VARCHAR(255), time VARCHAR(255), reporterID VARCHAR(255), reportedID VARCHAR(255), handler VARCHAR(255), handlerID VARCHAR(255), server INTEGER(4)) ENGINE=MyISAM DEFAULT CHARSET=utf8" )
        reportQuery:start() -- Makes table if doesn't exist

        local warnQuery = self:query( "CREATE TABLE IF NOT EXISTS reportaddon_warns (rowid INTEGER(32) NOT NULL AUTO_INCREMENT PRIMARY KEY, warnedBy VARCHAR(255), warnedBySID VARCHAR(255), warned VARCHAR(255), warnedSID VARCHAR(255), warnReason VARCHAR(255), warnTime DATE, server INTEGER(4)) ENGINE=MyISAM DEFAULT CHARSET=utf8" )
        warnQuery:start() -- Makes table if doesn't exist
    end

    function radb:onConnectionFailed( err ) -- Prints message if connection failed
        print( "[REPORT ADDON] SQL Problems have occured!" )
        print( "[REPORT ADDON] Not sure what this means? It means bad things happened - try restarting your SQL server and your server and making sure your config options are correct!" )
        print( "[REPORT ADDON] Error:", err )
    end

    radb:connect() -- Connects to the database
end

/*------------------------------------------------------------------------
Donation for leaks

Qiwi Wallet         4890494419811120 
YandexMoney         410013095053302
WebMoney(WMR)       R235985364414
WebMoney(WMZ)       Z309855690994
------------------------------------------------------------------------*/